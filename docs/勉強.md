


説明

小林さん動作確認中にて発見。
条件＋結果にて以下の条件を満たす造りの場合、赤枠の表示がおかしくなるようです。
① 入力欄がある
② 明細行が2行（trが2つ以上存在）

以下temasやりとり時系列まとめ
1. 小林さんにて「F400100010LD」で事象再現




























以下小林さん確認事項
①条件＋結果でも赤囲みを行う、、のでしたっけ？
②赤枠対応を行う場合、少なくとも複数行の場合は以下を考慮する必要がある
　・右端のみならず、左端の縦の赤線がない。
　・「複数行表示」がないか、「単数行表示」の際に正しい表示になるの

2.鈴木返信

対応する場合は、どの画面タイプの明細部かを判断するのは現状のソースだと厳しいので、
画面生成ツール直さないといけないと思っています。



3.小林さん再返信

どの画面タイプの明細部かを判断するのは現状のソースだと厳しいので、
どう厳しいのかを明確にしたうえで、
どこで妥協するか、落としどころを決める

========================================================================================
上記を踏まえて

①条件＋結果でも赤囲みを行う、、のでしたっけ？

→ 本事象は埋め込み入力欄があるので、 #17431 にて対応なし。
　条件＋結果で埋め込み入力欄がある場合は赤枠にしない方針として対応を進める。

原因は説明に記載。
現在対応方針を思案中。
・ #17431 にて埋め込み系は赤枠にしないため、赤枠にならないように調整。※要パフォーマンス考慮。




与信を紐づけてる取引先、部門の取引台帳にて
経常限度ボタンをクリックすると以下エラーが発生する
![image](https://github.com/user-attachments/assets/d356fe90-4b4c-4f7b-ae06-ac6035c5c5d8)


取引台帳の部門コードを元にチェックをかけてるためである。
画面の部門、得意先に紐づく、得意先マスタの与信管理部門コードに変更してください。
また、経常限度ボタン押下時に与信枠情報を取得しているかと思いますが、その内容についても画面の部門、得意先に紐づく、得意先マスタの与信管理部門コードに変更お願いします。



「取引台帳 照会」で「経常限度照会」ボタンを押下し、「得意先」に設定された「得意先マスタ．与信管理部門」に紐づく「与信枠管理マスタ」の情報が遷移先で表示される事を確認しました。(該当のマスタが存在しない場合はエラーとなる事も確認済)

# 13051
ヒープサイズ
☆高橋 逸 さんが7ヶ月前に追加. 6日前に更新.


ステータス:
日立確認依頼中
優先度:
中
担当者:
★多川 雄一
開始日:
2024/5/10
期日:
2024/11/30 (期日まで 5日)
進捗率:

0%
予定工数:
備考:
起票者:
☆高橋 逸
回答者:
課題種別:
担当チーム:
性能対応
【日立】見積工数[h]:
改修ファイル名:


引用

説明

【2024/5/7】
開発環境(Premium)で確認：32bit⇒1.5GB/vCore、64bit⇒2.4GB/vCore(EP3) (多川さん)
検証/本番はPremium、本番はゾーン冗長あり⇒3インスタンス以上が必要
⇒.NETのヒープサイズについて追加調査する
EP1：1Core、3.5GB
EP2：2Core、7.0GB
EP3：4Core、14.0GB
⇒性能テストでサイジング決定

共通チームに確認
＃2と合わせて調査する

ガーベージコレクションの頻度の調査も実施する。→HSIN調査

岸 慶太郎 さんが5ヶ月前に更新

期日 を 2024/06/28 から 2024/07/19 に変更
担当者 を ★多川 雄一 から 小林 豊之 に変更
担当チーム を インフラ から 性能対応 に変更

いったん、プレ性能、Ｖｕｐチームで受け取ります。

ＶｕｐのプロセスでローカルＰＣ環境でも同じ課題に直面。

引用操作 #6
岸 慶太郎 さんが5ヶ月前に更新

多川さんが、HSINからの回答を追記してくれる予定。

引用操作 #8
★多川 雄一 さんが5ヶ月前に更新

ファイル AzureFunction_Heap_Size_WI#9.xlsx AzureFunction_Heap_Size_WI#9.xlsx を追加

HSIN調査結果を添付します。

カスタム コンテナーで調整可能

引用操作 #10
岸 慶太郎 さんが4ヶ月前に更新

期日 を 2024/07/19 から 2024/08/09 に変更

期日延長させていただきます。

引用操作 #11
岸 慶太郎 さんが3ヶ月前に更新

メモリサイズに占める利用可能サイズ、スケールアウト要因に関する確認として回答を記載する。

以下、（MS回答）と補足

■インスタンスの利用可能メモリサイズについて
　各インスタンスのメモリサイズ（EP3 14GB）には、OS等アプリ以外でのメモリ使用も含まれる。
　プラットフォーム側での使用量に関しましても具体的に固定された値等は無いが、
　一般的にはリソース作成直後の状況が参考の値となる。

■スケールコントローラによるスケーリング
　詳細なスケーリングのロジックなどは公開されておりませんが、基本的にイベント数に基づいてイベントドリブンなスケーリングが行われる。
　メモリや CPU の利用状況には必ず依存するとは限りません。

　→ スケールコントローラーは、イベントレートを監視し、スケールアウトやスケールインを決定する。
　→ 関数をトリガーするイベント（例えば、HTTPリクエスト、キューのメッセージ、タイマーイベントなど）が増加すると、
　　 Azure Functions は自動的にインスタンスを追加してスケールアウト。
　　 イベントが減少すると、不要なインスタンスを削除してスケールイン。

引用操作 #13
★多川 雄一 さんが3ヶ月前に更新

スケールインすると、DrainModeとなり、無応答期間が発生するため、
スケールイン、スケールアウトしない設定⇒同じ値で構築する。

引用操作 #15
★多川 雄一 さんが3ヶ月前に更新

検証環境、本番環境ともに、
プランのスケールアウトの最大バースト数が20となっており、
それぞれの環境の常時使用可能なインスタンス数に合わせたほうがいい。
検証環境については、常時使用可能なインスタンスが1なので、教育など多人数使用時は、デフォルト値のままのほうが良いかもしれない。

引用操作 #16
★多川 雄一 さんが2ヶ月前に更新

検証環境、本番環境のサイジングを検討中。

引用操作 #20
☆高橋 逸 さんが17日前に更新

最大バースト数
　本番３　検証３

ST終わるまでこの状態で進め、問題なければ決定

引用操作 #21
☆高橋 逸 さんが6日前に更新

期日 を 2024/11/08 から 2024/11/30 に変更

同時実行テストの際、メトリックスを確認し、バーストが起きていないことを確認する。
![image](https://github.com/user-attachments/assets/c7cc9abf-18bf-45c0-acd4-306e3afe48bf)
![image](https://github.com/user-attachments/assets/7b4e364f-a7ab-4c09-b6e8-3537606051c0)

